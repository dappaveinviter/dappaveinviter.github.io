import{E as D,e as N}from"./vant-vendor.4ef3227d.js";import{d as $,r as s,o as B,Q as v,W as f,X as S,F as h,a2 as w,u as z,c as g,S as E,R as M,a1 as T,_ as V,Z as F,Y as U}from"./vue-vendor.35e46c5c.js";import{d as G}from"./index.1e767141.js";import{R as O}from"./rebateList.1446cb44.js";import{s as Q,w as W,t as X}from"./vendor.98e38a8a.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";import"./main.795ec91e.js";import"./index.6fadf46c.js";const Z={class:"tabs"},j=["onClick"],q=$({__name:"rebate",setup(A){const{t:r}=Q(),d=W(),k=X(),m=s(Number(d.params.interval));let x=s([{title:r("yesterday"),interval:1},{title:r("nearly3Days"),interval:3},{title:r("nearly7Days"),interval:7},{title:r("all"),interval:0}]);const l=s([]),i=s(1),C=s(20),n=s(!1),p=s(!1),u=s(!1);function _(){let t=d.params.code;t&&(n.value=!0,G(t,m.value,i.value,C.value).then(a=>{var c;let e=a==null?void 0:a.page_info;i.value>1?l.value=l.value.concat((e==null?void 0:e.data)||[]):l.value=(e==null?void 0:e.data)||[],((c=e==null?void 0:e.data)==null?void 0:c.length)<(e==null?void 0:e.pageSize)?p.value=!0:i.value++}).catch(a=>{console.log(a),u.value=!0}).finally(()=>{setTimeout(()=>{n.value=!1},1e3)}))}function R(t){m.value=t.interval,k.replace({name:"Rebate",params:{code:d.params.code,interval:t.interval}}),y()}function y(){i.value=1,n.value=!1,p.value=!1,u.value=!1,l.value=[],_()}return B(()=>{y()}),(t,a)=>{var b;const e=D,c=N;return v(),f(h,null,[S("ul",Z,[(v(!0),f(h,null,w(z(x),(o,L)=>(v(),f("li",{key:L,class:V(["tab",{active:m.value===o.interval}]),onClick:F(H=>R(o),["stop"])},U(o.title),11,j))),128))]),g(c,{loading:n.value,"onUpdate:loading":a[0]||(a[0]=o=>n.value=o),error:u.value,"onUpdate:error":a[1]||(a[1]=o=>u.value=o),finished:p.value,"loading-text":t.$t("loading"),"error-text":t.$t("errorText"),"finished-text":((b=l.value)==null?void 0:b.length)>0?t.$t("noMore"):"",onLoad:_},{default:E(()=>[g(O,{tableList:l.value},null,8,["tableList"]),l.value&&l.value.length===0&&!n.value?(v(),M(e,{key:0,class:"empty",description:t.$t("emptyData")},null,8,["description"])):T("",!0)]),_:1},8,["loading","error","finished","loading-text","error-text","finished-text"])],64)}}});const se=Y(q,[["__scopeId","data-v-258c8427"]]);export{se as default};
