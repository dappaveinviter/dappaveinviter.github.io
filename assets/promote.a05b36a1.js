import{E as U,e as $}from"./vant-vendor.4ef3227d.js";import{d as B,r as l,o as D,Q as v,W as f,X as P,F as g,a2 as R,u as S,c as b,S as w,R as z,a1 as E,_ as M,Z as T,Y as V}from"./vue-vendor.35e46c5c.js";import{f as F}from"./index.1e767141.js";import{P as G}from"./promoteList.f5880e2c.js";import{s as O,w as Q,t as W}from"./vendor.98e38a8a.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";import"./main.795ec91e.js";import"./index.6fadf46c.js";const Y={class:"tabs"},Z=["onClick"],j=B({__name:"promote",setup(q){const{t:n}=O(),c=Q(),k=W(),m=l(Number(c.params.interval));let x=l([{title:n("yesterday"),interval:1},{title:n("nearly3Days"),interval:3},{title:n("nearly7Days"),interval:7},{title:n("all"),interval:0}]);const a=l([]),i=l(1),C=l(20),r=l(!1),p=l(!1),u=l(!1);function _(){let t=c.params.code;t&&(r.value=!0,F(t,m.value,i.value,C.value).then(s=>{var d;let e=s;i.value>1?a.value=a.value.concat((e==null?void 0:e.data)||[]):a.value=(e==null?void 0:e.data)||[],((d=e==null?void 0:e.data)==null?void 0:d.length)<(e==null?void 0:e.pageSize)?p.value=!0:i.value++}).catch(s=>{console.log(s),u.value=!0}).finally(()=>{setTimeout(()=>{r.value=!1},1e3)}))}function L(t){m.value=t.interval,k.replace({name:"Rebate",params:{code:c.params.code,interval:t.interval}}),y()}function y(){i.value=1,r.value=!1,p.value=!1,u.value=!1,a.value=[],_()}return D(()=>{y()}),(t,s)=>{var h;const e=U,d=$;return v(),f(g,null,[P("ul",Y,[(v(!0),f(g,null,R(S(x),(o,N)=>(v(),f("li",{key:N,class:M(["tab",{active:m.value===o.interval}]),onClick:T(A=>L(o),["stop"])},V(o.title),11,Z))),128))]),b(d,{loading:r.value,"onUpdate:loading":s[0]||(s[0]=o=>r.value=o),error:u.value,"onUpdate:error":s[1]||(s[1]=o=>u.value=o),finished:p.value,"loading-text":t.$t("loading"),"error-text":t.$t("errorText"),"finished-text":((h=a.value)==null?void 0:h.length)>0?t.$t("noMore"):"",onLoad:_},{default:w(()=>[b(G,{tableList:a.value},null,8,["tableList"]),a.value&&a.value.length===0&&!r.value?(v(),z(e,{key:0,class:"empty",description:t.$t("emptyData")},null,8,["description"])):E("",!0)]),_:1},8,["loading","error","finished","loading-text","error-text","finished-text"])],64)}}});const le=X(j,[["__scopeId","data-v-1da0f457"]]);export{le as default};
